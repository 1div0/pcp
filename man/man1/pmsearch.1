'\"macro stdmacro
.\"
.\" Copyright (c) 2020 Red Hat.
.\"
.\" This program is free software; you can redistribute it and/or modify it
.\" under the terms of the GNU General Public License as published by the
.\" Free Software Foundation; either version 2 of the License, or (at your
.\" option) any later version.
.\"
.\" This program is distributed in the hope that it will be useful, but
.\" WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
.\" or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
.\" for more details.
.\"
.\"
.TH PMSERIES 1 "PCP" "Performance Co-Pilot"
.SH NAME
\f3pmsearch\f1 \- display information from full-text Redis index
.SH SYNOPSIS
\fBpmsearch\fR
[\fB\-cdinqstvV?\fR]
[\fB\-c\fR \fIconfig\fR]
[\fB\-h\fR \fIhost\fR]
[\fB\-p\fR \fIport\fR]
[\fB\-p\fR \fIport\fR]
[\fB\-N\fR \fInumber\fR]
[\fB\-o\fR \fIoffset\fR]
[\fIquery\fR | \fIindom\fR]
.SH DESCRIPTION
.de SAMPLE
.RS 2n
.nf
.nh
..
.de ESAMPLE
.hy
.fi
.RE
..
.B pmsearch
displays various types of information about performance metrics, instances and instance domains available through the scalable timeseries facilities of the
Performance Co-Pilot (PCP) and the Redis distributed data store.
.SH OPTIONS
.TP 5
\fB\-c\fR \fIconfig\fR, \fB\-\-config\fR=\fIconfig\fR
Specify the
.IR config
file to use.
.TP
\fB\-C\fR, \fB\-\-no-colour\fR
No highlighting in results text
.TP
\fB\-d\fR, \fB\-\-docid\fR
Report document ID of each search result
.TP
\fB\-h\fR \fIhost\fR, \fB\-\-host\fR=\fIhost\fR
Connect Redis server at
.IR host ,
rather than the one the localhost.
.TP
\fB\-i\fR, \fB\-\-info\fR
Report search engine internal metrics
.TP
\fB\-n\fR, \fB\-\-names\fR
Search for
.IR names ,
associated with given InDom
.TP
\fB\-N\fR \fIN\fR, \fB\-\-number\fR=\fIN\fR
Return
.IR N ,
search results at most
.TP
\fB\-o\fR \fIN\fR, \fB\-\-offset\fR=\fIN\fR
Paginated results from given offset
.TP
\fB\-p\fR \fIport\fR, \fB\-\-port\fR=\fIport\fR
Connect Redis server at
.IR port ,
rather than the default \fB6379\fR.
.TP
\fB\-q\fR, \fB\-\-query\fR
Perform a general text search (default).
.TP
\fB\-s\fR, \fB\-\-score\fR
Report score (rank) of each result
.TP
\fB\-t\fR, \fB\-\-total\fR
Report total number of of search results
.TP
\fB\-v\fR, \fB\-\-verbose\fR
Report elapsed search execution time
.TP
\fB\-V\fR, \fB\-\-version\fR
Display version number and exit
.TP
\fB\-?\fR, \fB\-\-help\fR
Display usage message and exit.
.SH EXAMPLES
.PP
.SAMPLE
$ pmsearch disk.all.read

Type: metric
Name: disk.all.read
One line: total read operations, summed for all disks
Help: Cumulative number of disk read operations since system boot time
(subject to counter wrap), summed over all disk devices.

Type: metric
Name: disk.all.read_rawactive
One line: raw count of read response time, summed for all disks
Help: For each completed read on every disk the response time (queue time plus
service time) in milliseconds is added to this metric.

When converted to a normalized rate, the value represents the time average
of the number of outstanding reads across all disks.  When divided
by the number of completed reads for all disks (disk.all.read), value
represents the stochastic average of the read response (or wait) time
across all disks.

It is suitable mainly for use in calculations with other metrics,
e.g. mirroring the results from existing performance tools:

 iostat.all.r_await = delta(disk.all.read_rawactive) / delta(disk.all.read)
.ESAMPLE
.PP
.SAMPLE
$ pmsearch -i

RediSearch statistics:
    Documents: 1589
        Terms: 3855
      Records: 117661
- Average records per doc: 74.05
- Average bytes per record: 6.36
- Inverted Index
         Size: 0.71 MB
     Capacity: 0.00 MB
     Overhead: 0.00
- Skip Index
         Size: 0.00 MB
- Score Index
         Size: 0.00 MB
- Average offsets per term: 9.35
- Average offset bits per record: 8.00
.ESAMPLE
.SH PCP ENVIRONMENT
Environment variables with the prefix \fBPCP_\fP are used to parameterize
the file and directory names used by PCP.
On each installation, the
file \fI/etc/pcp.conf\fP contains the local values for these variables.
The \fB$PCP_CONF\fP variable may be used to specify an alternative
configuration file, as described in \fBpcp.conf\fP(5).
.PP
For environment variables affecting PCP tools, see \fBpmGetOptions\fP(3).
.SH SEE ALSO
.BR PCPIntro (1),
.BR pmcd (1),
.BR pminfo (1),
.BR pmproxy (1),
.BR redis-server (1),
.BR access (2),
.BR PMAPI (3),
.BR PMWEBAPI (3),
.BR pmLookupDesc (3),
.BR pmLookupInDom (3),
.BR pmLookupLabels (3),
.BR pmLookupName (3),
.BR pmNewContextZone (3),
.BR pmNewZone (3),
.BR pmParseInterval (3),
.BR pmParseTimeWindow (3),
.BR pcp.conf (5),
.BR environ (7),
.BR glob (7)
and
.BR regex (7).
